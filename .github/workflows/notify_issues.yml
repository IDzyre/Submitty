name: notify_good_first_issue

on:
  issues:
    types:
      - labeled
jobs:
  notify_zulip:
    runs-on: ubuntu-latest
    steps:
      - name: Send notification to Zulip
        if: github.event.label.name == 'good first issue'
        run: |
          curl -X POST https://submitty.zulipchat.com/api/v1/messages -u ${{ secrets.ZULIP_AUTHENTICATION }} --data-urlencode 'type=stream' --data-urlencode 'to=RPI Developers' \
          --data-urlencode 'topic=Available Good First Issue' --data-urlencode \
          'content=A good first issue has been posted. View here: [${{ github.event.issue.title }}](https://github.com/Submitty/Submitty/issues/${{ github.event.issue.number }})'
